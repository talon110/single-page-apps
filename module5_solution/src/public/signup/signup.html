<div id="main-content" class="container" ng-controller="SignupController as $ctrl">
  <div class="heading">
    Please sign up to receive our newsletter containing updates to our menu and current specials!
  </div>
  <div class="alert alert-success" role="alert" ng-if="$ctrl.completed">
    Your information has been saved
  </div>
  <div class="alert alert-danger" role="alert" ng-if="!$ctrl.completed && regForm.$submitted == true">
    Unable to save your information
  </div>
  <legend>Registration</legend>
  <form name="regForm" ng-submit="$ctrl.submit(regForm)" novalidate>
    <div class="form-row" id="row">
      <div class="form-group col-md-6">
        <label for="firstName">First Name</label>
        <input
          type="text"
          class="form-control"
          name="firstName"
          placeholder="Enter first name"
          ng-model="$ctrl.user.firstName"
          required>
        <span ng-if="regForm.firstName.$error.required && regForm.firstName.$touched">
          First name is required
        </span>
      </div>
      <div class="form-group col-md-6">
        <label for="lastName">Last Name</label>
        <input
          type="text"
          class="form-control"
          name="lastName"
          placeholder="Enter last name"
          ng-model="$ctrl.user.lastName"
          required>
        <span ng-if="regForm.lastName.$error.required && regForm.lastName.$touched">
          Last name is required
        </span>
      </div>
    </div>
    <div class="form-group">
      <label for="email">Email address</label>
      <input
        type="email"
        class="form-control"
        name="email"
        aria-describedby="emailHelp"
        placeholder="Enter email"
        ng-model="$ctrl.user.email"
        required>
      <span ng-if="regForm.email.$invalid && regForm.email.$touched">
        Must be a valid email address: handle@domain format<br>
      </span>
      <small id="emailHelp" class="form-text text-muted">Please enter your email address. We'll never share it with anyone else.</small>
    </div>
    <div class="form-group">
      <label for="phone">Phone Number</label>
      <input
        type="text"
        class="form-control"
        name="phone"
        aria-describedby="phoneHelp"
        placeholder="Phone ###-###-####"
        ng-model="$ctrl.user.phone"
        pattern="^(\d{3})-(\d{3})-(\d{4})$"
        required>
      <span ng-if="regForm.phone.$invalid && regForm.phone.$touched">
        Phone must be in the format ###-###-####<br>
      </span>
      <small id="phoneHelp" class="form-text text-muted">Please enter your phone number. We'll never share it with anyone else.</small>
    </div>
    <div class="form-group">
      <label for="favoriteDish">Favorite Dish</label>
      <input
        type="text"
        class="form-control"
        name="dish"
        aria-describedby="dishHelp"
        placeholder="Enter favorite dish"
        ng-model="$ctrl.user.dish"
        pattern="^[a-zA-Z]{1,2}[0-9]{1,2}$"
        required
        dish>
      <span ng-if="!regForm.dish.$error.required && !regForm.$error.dish && regForm.dish.$invalid && regForm.dish.$touched">
        Favorite dish is invalid<br>
      </span>
      <span ng-if="regForm.dish.$error.required && regForm.dish.$touched">
        Favorite dish is required<br>
      </span>
      <span ng-if="!$ctrl.completed && regForm.$submitted == true">
        No such menu item exists<br>
      </span>
      <span ng-show="regForm.$pending.dish">
        Checking if this dish exists...<br>
      </span>
      <span ng-show="regForm.$error.dish">
        This dish doesn't exist!<br>
      </span>
      <small id="dishHelp" class="form-text text-muted">Please enter the menu number of your favorite dish.</small>
    </div>
    <button
      type="submit"
      class="btn btn-primary"
      ng-disabled="regForm.$invalid">Submit</button>
  </form>
</div>
